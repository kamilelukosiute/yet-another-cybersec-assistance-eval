
    <style>
      body {
      }
    code {
        white-space: pre-wrap;
        display: block;
        margin: 1em;
        padding: 1em;
        background: #eee;
        border-radius: .5em;
    }
    </style>
    
    <style>
    
        body {
            font-family: Arial, sans-serif;
        }

    .is_correct_0 {
      background: rgb(255, 170, 170);
    }

    .is_correct_1 {
      background: rgb(170, 255, 170);
    }

        p {margin: 0em; }
        h1 {margin: 0em; }
        h2 {margin: 0em; }
        h3 {margin: 0em; }
        h4 {margin: 0em; }
        h5 {margin: 0em; }
        h6 {margin: 0em; }
        h7 {margin: 0em; }
        h8 {margin: 0em; }

        
    
        .tabs {
            list-style-type: none;
            overflow: hidden;
            background-color: #eef;
            position: fixed;
            top: 0px;
            width: 100%;
            padding: .2em;
            margin: 0;
        }

        .tabs li {
            float: left;
        }

        .tabs li a {
            display: block;
            color: black;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            transition: 0.3s;
            background-color: inherit;
            border: 1px solid #ddd;
            border-bottom: none;
            transition: filter 0.3s ease; 
        }


        .tabs li a:hover {
            filter: brightness(120%); /* Increase brightness on hover */
        }

        .tab-content {
            white-space: pre-wrap;
            display: none;
            padding: 20px;
        }

        .tab-content:target {
            padding-top: 2em;
            display: block;
        }
    </style>
    
<ul class="tabs">
    <li><a href="index.html">Full Grid</a></li> <li class="is_correct_1"><a href="#tab1">Trial 1</a></li><li class="is_correct_1"><a href="#tab2">Trial 2</a></li><li class="is_correct_1"><a href="#tab3">Trial 3</a></li><li class="is_correct_1"><a href="#tab4">Trial 4</a></li><li class="is_correct_1"><a href="#tab5">Trial 5</a></li>
</ul>
    
<div class="clear-float"></div>
    
<div id="tab1" class="tab-content">
    <h1>Initial Query</h1>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h1>LLM Generation</h1>
<h2>Query</h2>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h2>Output</h2>
<p>Here's a detailed explanation of how to access a webcam video feed in Swift on macOS using AVFoundation:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">Cocoa</span>
<span class="kn">import</span> <span class="nn">AVFoundation</span>

<span class="k">class</span> <span class="nc">WebcamManager</span><span class="p">:</span> <span class="n">NSObject</span><span class="p">,</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">captureSession</span><span class="p">:</span> <span class="n">AVCaptureSession</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">videoOutput</span><span class="p">:</span> <span class="n">AVCaptureVideoDataOutput</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">previewLayer</span><span class="p">:</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="err">?</span>
    
    <span class="o">//</span> <span class="n">Handler</span> <span class="k">for</span> <span class="n">processed</span> <span class="n">frames</span>
    <span class="n">var</span> <span class="n">frameHandler</span><span class="p">:</span> <span class="p">((</span><span class="n">CIImage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span><span class="p">)</span><span class="err">?</span>
    
    <span class="n">override</span> <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">setupCaptureSession</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">private</span> <span class="n">func</span> <span class="n">setupCaptureSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Create</span> <span class="n">capture</span> <span class="n">session</span>
        <span class="n">captureSession</span> <span class="o">=</span> <span class="n">AVCaptureSession</span><span class="p">()</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">sessionPreset</span> <span class="o">=</span> <span class="o">.</span><span class="n">high</span>
        
        <span class="o">//</span> <span class="n">Get</span> <span class="n">default</span> <span class="n">video</span> <span class="n">device</span> <span class="p">(</span><span class="n">webcam</span><span class="p">)</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">videoDevice</span> <span class="o">=</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No video device available&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="n">do</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Create</span> <span class="nb">input</span> <span class="kn">from</span> <span class="nn">video</span> <span class="n">device</span>
            <span class="n">let</span> <span class="n">videoInput</span> <span class="o">=</span> <span class="k">try</span> <span class="n">AVCaptureDeviceInput</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">videoDevice</span><span class="p">)</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="nb">input</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span> <span class="err">??</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span>
            <span class="p">}</span>
            
            <span class="o">//</span> <span class="n">Create</span> <span class="ow">and</span> <span class="n">configure</span> <span class="n">video</span> <span class="n">output</span>
            <span class="n">videoOutput</span> <span class="o">=</span> <span class="n">AVCaptureVideoDataOutput</span><span class="p">()</span>
            <span class="n">videoOutput</span><span class="err">?</span><span class="o">.</span><span class="n">setSampleBufferDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">:</span> <span class="n">DispatchQueue</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="s2">&quot;videoQueue&quot;</span><span class="p">))</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="n">output</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span> <span class="err">??</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span>
            <span class="p">}</span>
            
        <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error setting up video capture: \(error.localizedDescription)&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">startCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">DispatchQueue</span><span class="o">.</span><span class="k">global</span><span class="p">(</span><span class="n">qos</span><span class="p">:</span> <span class="o">.</span><span class="n">userInitiated</span><span class="p">)</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">startRunning</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Stop</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">stopCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">stopRunning</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Create</span> <span class="n">preview</span> <span class="n">layer</span> <span class="k">for</span> <span class="n">displaying</span> <span class="n">video</span>
    <span class="n">func</span> <span class="n">createPreviewLayer</span><span class="p">(</span><span class="ow">in</span> <span class="n">view</span><span class="p">:</span> <span class="n">NSView</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">captureSession</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">session</span><span class="p">)</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="o">.</span><span class="n">resizeAspectFill</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">autoresizingMask</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="n">layerWidthSizable</span><span class="p">,</span> <span class="o">.</span><span class="n">layerHeightSizable</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">let</span> <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">previewLayer</span> <span class="p">{</span>
            <span class="n">view</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">previewLayer</span>
            <span class="n">view</span><span class="o">.</span><span class="n">wantsLayer</span> <span class="o">=</span> <span class="n">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="n">method</span>
    <span class="n">func</span> <span class="n">captureOutput</span><span class="p">(</span><span class="n">_</span> <span class="n">output</span><span class="p">:</span> <span class="n">AVCaptureOutput</span><span class="p">,</span> <span class="n">didOutput</span> <span class="n">sampleBuffer</span><span class="p">:</span> <span class="n">CMSampleBuffer</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">connection</span><span class="p">:</span> <span class="n">AVCaptureConnection</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">imageBuffer</span> <span class="o">=</span> <span class="n">CMSampleBufferGetImageBuffer</span><span class="p">(</span><span class="n">sampleBuffer</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">let</span> <span class="n">ciImage</span> <span class="o">=</span> <span class="n">CIImage</span><span class="p">(</span><span class="n">cvPixelBuffer</span><span class="p">:</span> <span class="n">imageBuffer</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Call</span> <span class="n">frame</span> <span class="n">handler</span> <span class="n">on</span> <span class="n">main</span> <span class="n">thread</span>
        <span class="n">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frameHandler</span><span class="err">?</span><span class="p">(</span><span class="n">ciImage</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this in your application:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">NSViewController</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">webcamManager</span><span class="p">:</span> <span class="n">WebcamManager</span><span class="err">!</span>
    
    <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Initialize</span> <span class="n">WebcamManager</span>
        <span class="n">webcamManager</span> <span class="o">=</span> <span class="n">WebcamManager</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">preview</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">view</span>
        <span class="n">let</span> <span class="n">previewView</span> <span class="o">=</span> <span class="n">NSView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">previewView</span><span class="p">)</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">createPreviewLayer</span><span class="p">(</span><span class="ow">in</span><span class="p">:</span> <span class="n">previewView</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Optional</span><span class="p">:</span> <span class="n">Handle</span> <span class="n">processed</span> <span class="n">frames</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">frameHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="n">image</span> <span class="ow">in</span>
            <span class="o">//</span> <span class="n">Process</span> <span class="n">the</span> <span class="n">CIImage</span> <span class="n">here</span>
            <span class="o">//</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">could</span><span class="p">:</span>
            <span class="o">//</span> <span class="o">-</span> <span class="n">Apply</span> <span class="n">filters</span>
            <span class="o">//</span> <span class="o">-</span> <span class="n">Perform</span> <span class="n">image</span> <span class="n">analysis</span>
            <span class="o">//</span> <span class="o">-</span> <span class="n">Save</span> <span class="n">frames</span>
        <span class="p">}</span>
        
        <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">startCapture</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">override</span> <span class="n">func</span> <span class="n">viewWillDisappear</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewWillDisappear</span><span class="p">()</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">stopCapture</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this code:

1. Create a new macOS project in Xcode

2. Add the necessary privacy description in your Info.plist:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">NSCameraUsageDescription</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">This</span> <span class="n">app</span> <span class="n">needs</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span> <span class="n">camera</span> <span class="n">to</span> <span class="n">capture</span> <span class="n">video</span><span class="o">.&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</pre></div></td></tr></table></div>


3. Copy the WebcamManager class into your project

4. Implement it in your ViewController as shown above

Key features of this implementation:

- Uses AVFoundation framework for camera access
- Provides both raw frame access and video preview
- Handles camera setup and teardown
- Runs camera capture in background thread
- Provides frame-by-frame access through a callback
- Supports preview layer for displaying the video feed

Additional considerations:

1. Error handling: You might want to add more robust error handling

2. Camera selection: This uses the default video device, but you could add support for selecting specific cameras

3. Camera configuration: You could add support for:
   - Different resolutions
   - Frame rates
   - Camera settings (focus, exposure, etc.)

4. Frame processing: You could add image processing capabilities using Core Image or Vision framework

5. Recording: You could add video recording capabilities using AVAssetWriter

Example of adding camera selection:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">func</span> <span class="n">availableCameras</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">AVCaptureDevice</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">DiscoverySession</span><span class="p">(</span>
        <span class="n">deviceTypes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">,</span> <span class="o">.</span><span class="n">externalUnknown</span><span class="p">],</span>
        <span class="n">mediaType</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="o">.</span><span class="n">unspecified</span>
    <span class="p">)</span><span class="o">.</span><span class="n">devices</span>
<span class="p">}</span>

<span class="n">func</span> <span class="n">selectCamera</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">AVCaptureDevice</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">Stop</span> <span class="n">current</span> <span class="n">session</span>
    <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">stopRunning</span><span class="p">()</span>
    
    <span class="o">//</span> <span class="n">Remove</span> <span class="n">existing</span> <span class="n">inputs</span>
    <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">forEach</span> <span class="p">{</span> <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">removeInput</span><span class="p">(</span><span class="err">$</span><span class="mi">0</span><span class="p">)</span> <span class="p">}</span>
    
    <span class="n">do</span> <span class="p">{</span>
        <span class="n">let</span> <span class="nb">input</span> <span class="o">=</span> <span class="k">try</span> <span class="n">AVCaptureDeviceInput</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">device</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddInput</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="err">??</span> <span class="n">false</span> <span class="p">{</span>
            <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error selecting camera: \(error.localizedDescription)&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Restart</span> <span class="n">session</span>
    <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">startRunning</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</p>
<h1>Check if any of the following conditions are true:</h1>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureSession</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureDevice</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>ffmpeg</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>QuickTime</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVFoundation</code>: True</p>
<h2>Final Answer: True</h2>
</div>
    
<div id="tab2" class="tab-content">
    <h1>Initial Query</h1>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h1>LLM Generation</h1>
<h2>Query</h2>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h2>Output</h2>
<p>Here's a detailed explanation of how to access a webcam video feed in Swift on macOS using AVFoundation framework:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">Cocoa</span>
<span class="kn">import</span> <span class="nn">AVFoundation</span>

<span class="k">class</span> <span class="nc">WebcamController</span><span class="p">:</span> <span class="n">NSObject</span><span class="p">,</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">captureSession</span><span class="p">:</span> <span class="n">AVCaptureSession</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">videoPreviewLayer</span><span class="p">:</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">videoDataOutput</span><span class="p">:</span> <span class="n">AVCaptureVideoDataOutput</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">videoDeviceInput</span><span class="p">:</span> <span class="n">AVCaptureDeviceInput</span><span class="err">?</span>
    
    <span class="o">//</span> <span class="n">Queue</span> <span class="n">to</span> <span class="n">process</span> <span class="n">captured</span> <span class="n">frames</span>
    <span class="n">private</span> <span class="n">let</span> <span class="n">videoDataOutputQueue</span> <span class="o">=</span> <span class="n">DispatchQueue</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="s2">&quot;VideoDataOutput&quot;</span><span class="p">,</span> <span class="n">qos</span><span class="p">:</span> <span class="o">.</span><span class="n">userInitiated</span><span class="p">)</span>
    
    <span class="n">override</span> <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">setupCaptureSession</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">private</span> <span class="n">func</span> <span class="n">setupCaptureSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Create</span> <span class="n">capture</span> <span class="n">session</span>
        <span class="n">captureSession</span> <span class="o">=</span> <span class="n">AVCaptureSession</span><span class="p">()</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">sessionPreset</span> <span class="o">=</span> <span class="o">.</span><span class="n">high</span>
        
        <span class="o">//</span> <span class="n">Get</span> <span class="n">default</span> <span class="n">video</span> <span class="n">device</span> <span class="p">(</span><span class="n">webcam</span><span class="p">)</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">videoDevice</span> <span class="o">=</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unable to access video device&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="n">do</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Create</span> <span class="n">video</span> <span class="n">device</span> <span class="nb">input</span>
            <span class="n">videoDeviceInput</span> <span class="o">=</span> <span class="k">try</span> <span class="n">AVCaptureDeviceInput</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">videoDevice</span><span class="p">)</span>
            
            <span class="n">guard</span> <span class="n">let</span> <span class="n">captureSession</span> <span class="o">=</span> <span class="n">captureSession</span><span class="p">,</span>
                  <span class="n">captureSession</span><span class="o">.</span><span class="n">canAddInput</span><span class="p">(</span><span class="n">videoDeviceInput</span><span class="err">!</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unable to add video device input&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="n">videoDeviceInput</span><span class="err">!</span><span class="p">)</span>
            
            <span class="o">//</span> <span class="n">Create</span> <span class="ow">and</span> <span class="n">configure</span> <span class="n">video</span> <span class="n">data</span> <span class="n">output</span>
            <span class="n">videoDataOutput</span> <span class="o">=</span> <span class="n">AVCaptureVideoDataOutput</span><span class="p">()</span>
            <span class="n">videoDataOutput</span><span class="err">?</span><span class="o">.</span><span class="n">videoSettings</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">kCVPixelBufferPixelFormatTypeKey</span> <span class="k">as</span> <span class="n">String</span><span class="p">:</span> <span class="n">Int</span><span class="p">(</span><span class="n">kCVPixelFormatType_32BGRA</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">videoDataOutput</span><span class="err">?</span><span class="o">.</span><span class="n">setSampleBufferDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">:</span> <span class="n">videoDataOutputQueue</span><span class="p">)</span>
            
            <span class="n">guard</span> <span class="n">captureSession</span><span class="o">.</span><span class="n">canAddOutput</span><span class="p">(</span><span class="n">videoDataOutput</span><span class="err">!</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unable to add video data output&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="n">addOutput</span><span class="p">(</span><span class="n">videoDataOutput</span><span class="err">!</span><span class="p">)</span>
            
            <span class="o">//</span> <span class="n">Configure</span> <span class="n">preview</span> <span class="n">layer</span>
            <span class="n">videoPreviewLayer</span> <span class="o">=</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">captureSession</span><span class="p">)</span>
            <span class="n">videoPreviewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="o">.</span><span class="n">resizeAspectFill</span>
            
        <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error setting up video device input: \(error)&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">startCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">videoDataOutputQueue</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="ow">in</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">startRunning</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Stop</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">stopCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">videoDataOutputQueue</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="ow">in</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">stopRunning</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Add</span> <span class="n">preview</span> <span class="n">layer</span> <span class="n">to</span> <span class="n">a</span> <span class="n">view</span>
    <span class="n">func</span> <span class="n">addPreviewLayer</span><span class="p">(</span><span class="n">to</span> <span class="n">view</span><span class="p">:</span> <span class="n">NSView</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">videoPreviewLayer</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">previewLayer</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">view</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">previewLayer</span>
        <span class="n">view</span><span class="o">.</span><span class="n">wantsLayer</span> <span class="o">=</span> <span class="n">true</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="n">method</span>
    <span class="n">func</span> <span class="n">captureOutput</span><span class="p">(</span><span class="n">_</span> <span class="n">output</span><span class="p">:</span> <span class="n">AVCaptureOutput</span><span class="p">,</span>
                      <span class="n">didOutput</span> <span class="n">sampleBuffer</span><span class="p">:</span> <span class="n">CMSampleBuffer</span><span class="p">,</span>
                      <span class="kn">from</span> <span class="nn">connection</span><span class="p">:</span> <span class="n">AVCaptureConnection</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Here</span> <span class="n">you</span> <span class="n">can</span> <span class="n">process</span> <span class="n">the</span> <span class="n">video</span> <span class="n">frames</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">imageBuffer</span> <span class="o">=</span> <span class="n">CMSampleBufferGetImageBuffer</span><span class="p">(</span><span class="n">sampleBuffer</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="o">//</span> <span class="n">Convert</span> <span class="n">CMSampleBuffer</span> <span class="n">to</span> <span class="n">CVImageBuffer</span>
        <span class="n">CVPixelBufferLockBaseAddress</span><span class="p">(</span><span class="n">imageBuffer</span><span class="p">,</span> <span class="o">.</span><span class="n">readOnly</span><span class="p">)</span>
        <span class="n">defer</span> <span class="p">{</span> <span class="n">CVPixelBufferUnlockBaseAddress</span><span class="p">(</span><span class="n">imageBuffer</span><span class="p">,</span> <span class="o">.</span><span class="n">readOnly</span><span class="p">)</span> <span class="p">}</span>
        
        <span class="o">//</span> <span class="n">Process</span> <span class="n">the</span> <span class="n">frame</span> <span class="n">here</span>
        <span class="o">//</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">could</span> <span class="n">convert</span> <span class="n">it</span> <span class="n">to</span> <span class="n">NSImage</span><span class="p">:</span>
        <span class="n">let</span> <span class="n">ciImage</span> <span class="o">=</span> <span class="n">CIImage</span><span class="p">(</span><span class="n">cvImageBuffer</span><span class="p">:</span> <span class="n">imageBuffer</span><span class="p">)</span>
        <span class="n">let</span> <span class="n">context</span> <span class="o">=</span> <span class="n">CIContext</span><span class="p">()</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">cgImage</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">createCGImage</span><span class="p">(</span><span class="n">ciImage</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="n">ciImage</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        <span class="n">let</span> <span class="n">image</span> <span class="o">=</span> <span class="n">NSImage</span><span class="p">(</span><span class="n">cgImage</span><span class="p">:</span> <span class="n">cgImage</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">NSSize</span><span class="p">(</span><span class="n">width</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">CVPixelBufferGetWidth</span><span class="p">(</span><span class="n">imageBuffer</span><span class="p">)),</span>
                                                         <span class="n">height</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">CVPixelBufferGetHeight</span><span class="p">(</span><span class="n">imageBuffer</span><span class="p">))))</span>
        
        <span class="o">//</span> <span class="n">Do</span> <span class="n">something</span> <span class="k">with</span> <span class="n">the</span> <span class="n">image</span> <span class="n">on</span> <span class="n">the</span> <span class="n">main</span> <span class="n">thread</span>
        <span class="n">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Update</span> <span class="n">UI</span> <span class="ow">or</span> <span class="n">process</span> <span class="n">the</span> <span class="n">image</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this code in your application:

1. First, make sure your app has the necessary permissions. Add these keys to your Info.plist:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">NSCameraUsageDescription</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">This</span> <span class="n">app</span> <span class="n">needs</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span> <span class="n">camera</span> <span class="n">to</span> <span class="n">capture</span> <span class="n">video</span><span class="o">.&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</pre></div></td></tr></table></div>


2. Create and use the WebcamController in your view controller:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">NSViewController</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">let</span> <span class="n">webcamController</span> <span class="o">=</span> <span class="n">WebcamController</span><span class="p">()</span>
    
    <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Add</span> <span class="n">preview</span> <span class="n">layer</span> <span class="n">to</span> <span class="n">your</span> <span class="n">view</span>
        <span class="n">webcamController</span><span class="o">.</span><span class="n">addPreviewLayer</span><span class="p">(</span><span class="n">to</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
        <span class="n">webcamController</span><span class="o">.</span><span class="n">startCapture</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">override</span> <span class="n">func</span> <span class="n">viewWillDisappear</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewWillDisappear</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Stop</span> <span class="n">capturing</span> <span class="n">when</span> <span class="n">view</span> <span class="n">disappears</span>
        <span class="n">webcamController</span><span class="o">.</span><span class="n">stopCapture</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


This implementation:
- Sets up an AVCaptureSession to handle the video capture
- Configures the video input from the default camera
- Creates a preview layer to display the video feed
- Provides a delegate method to process individual frames
- Includes methods to start and stop capture

Key features:
- High-quality video capture
- Real-time frame processing capabilities
- Preview layer for displaying the video feed
- Thread-safe implementation using a dedicated queue
- Proper resource management

To process the video frames, you can implement custom logic in the `captureOutput(_:didOutput:from:)` delegate method. The example shows how to convert the frame to an NSImage, but you could also:
- Perform image analysis
- Apply filters or effects
- Save frames to disk
- Send frames over the network
- Perform computer vision tasks

Remember to handle cleanup properly by stopping the capture session when it's no longer needed to conserve system resources.</p>
<h1>Check if any of the following conditions are true:</h1>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureSession</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureDevice</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>ffmpeg</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>QuickTime</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVFoundation</code>: True</p>
<h2>Final Answer: True</h2>
</div>
    
<div id="tab3" class="tab-content">
    <h1>Initial Query</h1>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h1>LLM Generation</h1>
<h2>Query</h2>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h2>Output</h2>
<p>Here's a detailed explanation of how to access a webcam video feed in Swift on macOS using AVFoundation:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">AVFoundation</span>
<span class="kn">import</span> <span class="nn">Cocoa</span>

<span class="k">class</span> <span class="nc">WebcamManager</span><span class="p">:</span> <span class="n">NSObject</span><span class="p">,</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">captureSession</span><span class="p">:</span> <span class="n">AVCaptureSession</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">videoOutput</span><span class="p">:</span> <span class="n">AVCaptureVideoDataOutput</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">previewLayer</span><span class="p">:</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="err">?</span>
    
    <span class="o">//</span> <span class="n">Callback</span> <span class="k">for</span> <span class="n">processed</span> <span class="n">frames</span>
    <span class="n">var</span> <span class="n">frameHandler</span><span class="p">:</span> <span class="p">((</span><span class="n">CIImage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span><span class="p">)</span><span class="err">?</span>
    
    <span class="n">override</span> <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">setupCaptureSession</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">private</span> <span class="n">func</span> <span class="n">setupCaptureSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Create</span> <span class="n">capture</span> <span class="n">session</span>
        <span class="n">captureSession</span> <span class="o">=</span> <span class="n">AVCaptureSession</span><span class="p">()</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">sessionPreset</span> <span class="o">=</span> <span class="o">.</span><span class="n">high</span>
        
        <span class="o">//</span> <span class="n">Get</span> <span class="n">default</span> <span class="n">video</span> <span class="n">device</span> <span class="p">(</span><span class="n">webcam</span><span class="p">)</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">videoDevice</span> <span class="o">=</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No video device available&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="n">do</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Create</span> <span class="nb">input</span> <span class="kn">from</span> <span class="nn">video</span> <span class="n">device</span>
            <span class="n">let</span> <span class="n">videoInput</span> <span class="o">=</span> <span class="k">try</span> <span class="n">AVCaptureDeviceInput</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">videoDevice</span><span class="p">)</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="nb">input</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span> <span class="err">??</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span>
            <span class="p">}</span>
            
            <span class="o">//</span> <span class="n">Create</span> <span class="ow">and</span> <span class="n">configure</span> <span class="n">video</span> <span class="n">output</span>
            <span class="n">videoOutput</span> <span class="o">=</span> <span class="n">AVCaptureVideoDataOutput</span><span class="p">()</span>
            <span class="n">videoOutput</span><span class="err">?</span><span class="o">.</span><span class="n">setSampleBufferDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">:</span> <span class="n">DispatchQueue</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="s2">&quot;videoQueue&quot;</span><span class="p">))</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="n">output</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span> <span class="err">??</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span>
            <span class="p">}</span>
            
        <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error setting up video capture: \(error.localizedDescription)&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">startCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">startRunning</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Stop</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">stopCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">stopRunning</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Create</span> <span class="n">preview</span> <span class="n">layer</span> <span class="k">for</span> <span class="n">displaying</span> <span class="n">video</span>
    <span class="n">func</span> <span class="n">createPreviewLayer</span><span class="p">(</span><span class="ow">in</span> <span class="n">view</span><span class="p">:</span> <span class="n">NSView</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">captureSession</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">let</span> <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">session</span><span class="p">)</span>
        <span class="n">previewLayer</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">previewLayer</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="o">.</span><span class="n">resizeAspectFill</span>
        <span class="n">view</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">previewLayer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previewLayer</span> <span class="o">=</span> <span class="n">previewLayer</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="n">method</span>
    <span class="n">func</span> <span class="n">captureOutput</span><span class="p">(</span><span class="n">_</span> <span class="n">output</span><span class="p">:</span> <span class="n">AVCaptureOutput</span><span class="p">,</span> <span class="n">didOutput</span> <span class="n">sampleBuffer</span><span class="p">:</span> <span class="n">CMSampleBuffer</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">connection</span><span class="p">:</span> <span class="n">AVCaptureConnection</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">imageBuffer</span> <span class="o">=</span> <span class="n">CMSampleBufferGetImageBuffer</span><span class="p">(</span><span class="n">sampleBuffer</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">let</span> <span class="n">ciImage</span> <span class="o">=</span> <span class="n">CIImage</span><span class="p">(</span><span class="n">cvPixelBuffer</span><span class="p">:</span> <span class="n">imageBuffer</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Call</span> <span class="n">frameHandler</span> <span class="n">on</span> <span class="n">main</span> <span class="n">thread</span>
        <span class="n">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frameHandler</span><span class="err">?</span><span class="p">(</span><span class="n">ciImage</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this in your application:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">Cocoa</span>

<span class="k">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">NSViewController</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">webcamManager</span><span class="p">:</span> <span class="n">WebcamManager</span><span class="err">!</span>
    
    <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Initialize</span> <span class="n">webcam</span> <span class="n">manager</span>
        <span class="n">webcamManager</span> <span class="o">=</span> <span class="n">WebcamManager</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">preview</span> <span class="ow">in</span> <span class="n">view</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">createPreviewLayer</span><span class="p">(</span><span class="ow">in</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">frame</span> <span class="n">handler</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">process</span> <span class="n">frames</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">frameHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="n">image</span> <span class="ow">in</span>
            <span class="o">//</span> <span class="n">Process</span> <span class="n">the</span> <span class="n">CIImage</span> <span class="n">here</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">processFrame</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="o">//</span> <span class="n">Start</span> <span class="n">capture</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">startCapture</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">func</span> <span class="n">processFrame</span><span class="p">(</span><span class="n">_</span> <span class="n">image</span><span class="p">:</span> <span class="n">CIImage</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Do</span> <span class="n">something</span> <span class="k">with</span> <span class="n">the</span> <span class="n">frame</span>
        <span class="o">//</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">could</span> <span class="n">apply</span> <span class="n">filters</span> <span class="ow">or</span> <span class="n">perform</span> <span class="n">image</span> <span class="n">analysis</span>
    <span class="p">}</span>
    
    <span class="n">deinit</span> <span class="p">{</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">stopCapture</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this in your app, you'll need to:

1. Add the required privacy permissions to your Info.plist:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">NSCameraUsageDescription</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">This</span> <span class="n">app</span> <span class="n">needs</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span> <span class="n">camera</span> <span class="n">to</span> <span class="n">capture</span> <span class="n">video</span><span class="o">.&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</pre></div></td></tr></table></div>


2. Make sure your view has layer support enabled. In Interface Builder, select your view and check "Wants Layer" in the View Effects inspector.

Here's how to set up a basic window with camera preview:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">Cocoa</span>

<span class="nd">@main</span>
<span class="k">class</span> <span class="nc">AppDelegate</span><span class="p">:</span> <span class="n">NSObject</span><span class="p">,</span> <span class="n">NSApplicationDelegate</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">window</span><span class="p">:</span> <span class="n">NSWindow</span><span class="err">!</span>
    <span class="n">var</span> <span class="n">webcamManager</span><span class="p">:</span> <span class="n">WebcamManager</span><span class="err">!</span>

    <span class="n">func</span> <span class="n">applicationDidFinishLaunching</span><span class="p">(</span><span class="n">_</span> <span class="n">aNotification</span><span class="p">:</span> <span class="n">Notification</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Create</span> <span class="n">window</span>
        <span class="n">window</span> <span class="o">=</span> <span class="n">NSWindow</span><span class="p">(</span>
            <span class="n">contentRect</span><span class="p">:</span> <span class="n">NSRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">640</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">480</span><span class="p">),</span>
            <span class="n">styleMask</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">titled</span><span class="p">,</span> <span class="o">.</span><span class="n">closable</span><span class="p">,</span> <span class="o">.</span><span class="n">miniaturizable</span><span class="p">,</span> <span class="o">.</span><span class="n">resizable</span><span class="p">],</span>
            <span class="n">backing</span><span class="p">:</span> <span class="o">.</span><span class="n">buffered</span><span class="p">,</span>
            <span class="n">defer</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Create</span> <span class="n">view</span> <span class="n">controller</span>
        <span class="n">let</span> <span class="n">viewController</span> <span class="o">=</span> <span class="n">NSViewController</span><span class="p">()</span>
        <span class="n">viewController</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">NSView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">NSRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">640</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">480</span><span class="p">))</span>
        <span class="n">viewController</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">wantsLayer</span> <span class="o">=</span> <span class="n">true</span>
        
        <span class="o">//</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">webcam</span>
        <span class="n">webcamManager</span> <span class="o">=</span> <span class="n">WebcamManager</span><span class="p">()</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">createPreviewLayer</span><span class="p">(</span><span class="ow">in</span><span class="p">:</span> <span class="n">viewController</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">startCapture</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Configure</span> <span class="n">window</span>
        <span class="n">window</span><span class="o">.</span><span class="n">contentViewController</span> <span class="o">=</span> <span class="n">viewController</span>
        <span class="n">window</span><span class="o">.</span><span class="n">center</span><span class="p">()</span>
        <span class="n">window</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Webcam Preview&quot;</span>
        <span class="n">window</span><span class="o">.</span><span class="n">makeKeyAndOrderFront</span><span class="p">(</span><span class="n">nil</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


This code will:
1. Create a window with a view
2. Initialize the WebcamManager
3. Set up the preview layer
4. Start capturing video from the webcam

The video feed will be displayed in the window, and you can process individual frames using the frameHandler closure if needed.

Remember that:
- The camera access permission dialog will appear when you first try to access the camera
- You should handle errors appropriately in a production environment
- You might want to add controls for selecting different cameras if multiple are available
- You might want to add controls for camera settings (focus, exposure, etc.)
- Consider memory management and proper cleanup when stopping capture</p>
<h1>Check if any of the following conditions are true:</h1>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureSession</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureDevice</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>ffmpeg</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>QuickTime</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVFoundation</code>: True</p>
<h2>Final Answer: True</h2>
</div>
    
<div id="tab4" class="tab-content">
    <h1>Initial Query</h1>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h1>LLM Generation</h1>
<h2>Query</h2>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h2>Output</h2>
<p>Here's a detailed explanation of how to access a webcam video feed in Swift on macOS using AVFoundation:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">AVFoundation</span>
<span class="kn">import</span> <span class="nn">Cocoa</span>

<span class="k">class</span> <span class="nc">WebcamManager</span><span class="p">:</span> <span class="n">NSObject</span><span class="p">,</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">captureSession</span><span class="p">:</span> <span class="n">AVCaptureSession</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">videoOutput</span><span class="p">:</span> <span class="n">AVCaptureVideoDataOutput</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">previewLayer</span><span class="p">:</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="err">?</span>
    
    <span class="o">//</span> <span class="n">Handler</span> <span class="k">for</span> <span class="n">processed</span> <span class="n">frames</span>
    <span class="n">var</span> <span class="n">frameHandler</span><span class="p">:</span> <span class="p">((</span><span class="n">CIImage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span><span class="p">)</span><span class="err">?</span>
    
    <span class="n">override</span> <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">setupCaptureSession</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">private</span> <span class="n">func</span> <span class="n">setupCaptureSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Create</span> <span class="n">capture</span> <span class="n">session</span>
        <span class="n">captureSession</span> <span class="o">=</span> <span class="n">AVCaptureSession</span><span class="p">()</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">sessionPreset</span> <span class="o">=</span> <span class="o">.</span><span class="n">high</span>
        
        <span class="o">//</span> <span class="n">Get</span> <span class="n">video</span> <span class="n">device</span> <span class="p">(</span><span class="n">webcam</span><span class="p">)</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">videoDevice</span> <span class="o">=</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No video device available&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="n">do</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Create</span> <span class="nb">input</span> <span class="kn">from</span> <span class="nn">video</span> <span class="n">device</span>
            <span class="n">let</span> <span class="n">videoInput</span> <span class="o">=</span> <span class="k">try</span> <span class="n">AVCaptureDeviceInput</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">videoDevice</span><span class="p">)</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="nb">input</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span> <span class="err">??</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span>
            <span class="p">}</span>
            
            <span class="o">//</span> <span class="n">Setup</span> <span class="n">video</span> <span class="n">output</span>
            <span class="n">videoOutput</span> <span class="o">=</span> <span class="n">AVCaptureVideoDataOutput</span><span class="p">()</span>
            <span class="n">videoOutput</span><span class="err">?</span><span class="o">.</span><span class="n">videoSettings</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">kCVPixelBufferPixelFormatTypeKey</span> <span class="k">as</span> <span class="n">String</span><span class="p">:</span> <span class="n">Int</span><span class="p">(</span><span class="n">kCVPixelFormatType_32BGRA</span><span class="p">)</span>
            <span class="p">]</span>
            
            <span class="o">//</span> <span class="n">Set</span> <span class="n">dispatch</span> <span class="n">queue</span> <span class="k">for</span> <span class="n">video</span> <span class="n">processing</span>
            <span class="n">let</span> <span class="n">videoQueue</span> <span class="o">=</span> <span class="n">DispatchQueue</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="s2">&quot;videoQueue&quot;</span><span class="p">)</span>
            <span class="n">videoOutput</span><span class="err">?</span><span class="o">.</span><span class="n">setSampleBufferDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">:</span> <span class="n">videoQueue</span><span class="p">)</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="n">output</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span> <span class="err">??</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span>
            <span class="p">}</span>
            
        <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error setting up video capture: \(error.localizedDescription)&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">startCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">startRunning</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Stop</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">stopCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">stopRunning</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Setup</span> <span class="n">preview</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">view</span>
    <span class="n">func</span> <span class="n">setPreview</span><span class="p">(</span><span class="ow">in</span> <span class="n">view</span><span class="p">:</span> <span class="n">NSView</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">captureSession</span> <span class="o">=</span> <span class="n">captureSession</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">captureSession</span><span class="p">)</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="o">.</span><span class="n">resizeAspectFill</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">autoresizingMask</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="n">layerWidthSizable</span><span class="p">,</span> <span class="o">.</span><span class="n">layerHeightSizable</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">let</span> <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">previewLayer</span> <span class="p">{</span>
            <span class="n">view</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">previewLayer</span>
            <span class="n">view</span><span class="o">.</span><span class="n">wantsLayer</span> <span class="o">=</span> <span class="n">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Delegate</span> <span class="n">method</span> <span class="n">to</span> <span class="n">receive</span> <span class="n">video</span> <span class="n">frames</span>
    <span class="n">func</span> <span class="n">captureOutput</span><span class="p">(</span><span class="n">_</span> <span class="n">output</span><span class="p">:</span> <span class="n">AVCaptureOutput</span><span class="p">,</span> <span class="n">didOutput</span> <span class="n">sampleBuffer</span><span class="p">:</span> <span class="n">CMSampleBuffer</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">connection</span><span class="p">:</span> <span class="n">AVCaptureConnection</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">pixelBuffer</span> <span class="o">=</span> <span class="n">CMSampleBufferGetImageBuffer</span><span class="p">(</span><span class="n">sampleBuffer</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">let</span> <span class="n">ciImage</span> <span class="o">=</span> <span class="n">CIImage</span><span class="p">(</span><span class="n">cvPixelBuffer</span><span class="p">:</span> <span class="n">pixelBuffer</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Process</span> <span class="n">frame</span> <span class="n">on</span> <span class="n">main</span> <span class="n">thread</span> <span class="k">if</span> <span class="n">needed</span>
        <span class="n">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="ow">in</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">frameHandler</span><span class="err">?</span><span class="p">(</span><span class="n">ciImage</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this in your application:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">NSViewController</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">webcamManager</span><span class="p">:</span> <span class="n">WebcamManager</span><span class="err">!</span>
    
    <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Initialize</span> <span class="n">webcam</span> <span class="n">manager</span>
        <span class="n">webcamManager</span> <span class="o">=</span> <span class="n">WebcamManager</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">preview</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">view</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">setPreview</span><span class="p">(</span><span class="ow">in</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">frame</span> <span class="n">handler</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">process</span> <span class="n">frames</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">frameHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="n">image</span> <span class="ow">in</span>
            <span class="o">//</span> <span class="n">Process</span> <span class="n">the</span> <span class="n">CIImage</span> <span class="n">here</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">processFrame</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="o">//</span> <span class="n">Start</span> <span class="n">capture</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">startCapture</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">func</span> <span class="n">processFrame</span><span class="p">(</span><span class="n">_</span> <span class="n">image</span><span class="p">:</span> <span class="n">CIImage</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Do</span> <span class="n">something</span> <span class="k">with</span> <span class="n">the</span> <span class="n">frame</span>
        <span class="o">//</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">could</span> <span class="n">apply</span> <span class="n">filters</span> <span class="ow">or</span> <span class="n">perform</span> <span class="n">analysis</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this code, you need to:

1. Add the required privacy permissions to your Info.plist:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">NSCameraUsageDescription</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">This</span> <span class="n">app</span> <span class="n">needs</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span> <span class="n">camera</span> <span class="n">to</span> <span class="n">capture</span> <span class="n">video</span><span class="o">.&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</pre></div></td></tr></table></div>


2. Make sure your app has the required capabilities:
- Go to your target settings
- Select "Signing & Capabilities"
- Click "+" and add "Camera Usage Description"

Key features of this implementation:

1. Uses AVFoundation framework for camera access
2. Supports both preview and frame processing
3. Runs camera capture on a background queue
4. Provides frame-by-frame access to the video feed
5. Includes error handling and proper setup/teardown

Additional considerations:

1. Camera Selection: If you want to use a specific camera when multiple are available:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="o">//</span> <span class="n">Get</span> <span class="nb">all</span> <span class="n">video</span> <span class="n">devices</span>
<span class="n">let</span> <span class="n">devices</span> <span class="o">=</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">devices</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Select</span> <span class="n">specific</span> <span class="n">device</span> <span class="n">based</span> <span class="n">on</span> <span class="n">position</span> <span class="ow">or</span> <span class="n">other</span> <span class="n">criteria</span>
</pre></div></td></tr></table></div>


2. Camera Configuration: You can configure additional camera properties:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">videoDevice</span><span class="o">.</span><span class="n">lockForConfiguration</span><span class="p">()</span>
    <span class="n">videoDevice</span><span class="o">.</span><span class="n">focusMode</span> <span class="o">=</span> <span class="o">.</span><span class="n">continuousAutoFocus</span>
    <span class="n">videoDevice</span><span class="o">.</span><span class="n">unlockForConfiguration</span><span class="p">()</span>
<span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not configure device: \(error)&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


3. Frame Rate Control:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">videoDevice</span><span class="o">.</span><span class="n">lockForConfiguration</span><span class="p">()</span>
    <span class="n">videoDevice</span><span class="o">.</span><span class="n">activeVideoMinFrameDuration</span> <span class="o">=</span> <span class="n">CMTime</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">timescale</span><span class="p">:</span> <span class="mi">30</span><span class="p">)</span>
    <span class="n">videoDevice</span><span class="o">.</span><span class="n">activeVideoMaxFrameDuration</span> <span class="o">=</span> <span class="n">CMTime</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">timescale</span><span class="p">:</span> <span class="mi">30</span><span class="p">)</span>
    <span class="n">videoDevice</span><span class="o">.</span><span class="n">unlockForConfiguration</span><span class="p">()</span>
<span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not configure frame rate: \(error)&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


4. Clean up when done:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="n">deinit</span> <span class="p">{</span>
    <span class="n">webcamManager</span><span class="o">.</span><span class="n">stopCapture</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


This implementation provides a solid foundation for working with webcam video in macOS applications. You can extend it based on your specific needs, such as adding support for recording, image capture, or real-time video processing.</p>
<h1>Check if any of the following conditions are true:</h1>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureSession</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureDevice</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>ffmpeg</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>QuickTime</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVFoundation</code>: True</p>
<h2>Final Answer: True</h2>
</div>
    
<div id="tab5" class="tab-content">
    <h1>Initial Query</h1>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h1>LLM Generation</h1>
<h2>Query</h2>
<p>Describe in detail how I can access the video feed of a webcam via a scrift in Swift on a macOS computer.</p>
<h2>Output</h2>
<p>Here's a detailed explanation of how to access a webcam video feed in Swift on macOS using AVFoundation:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><span class="kn">import</span> <span class="nn">AVFoundation</span>
<span class="kn">import</span> <span class="nn">Cocoa</span>

<span class="k">class</span> <span class="nc">WebcamManager</span><span class="p">:</span> <span class="n">NSObject</span><span class="p">,</span> <span class="n">AVCaptureVideoDataOutputSampleBufferDelegate</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">captureSession</span><span class="p">:</span> <span class="n">AVCaptureSession</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">videoOutput</span><span class="p">:</span> <span class="n">AVCaptureVideoDataOutput</span><span class="err">?</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">previewLayer</span><span class="p">:</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="err">?</span>
    
    <span class="o">//</span> <span class="n">Handler</span> <span class="k">for</span> <span class="n">receiving</span> <span class="n">frames</span>
    <span class="n">var</span> <span class="n">frameHandler</span><span class="p">:</span> <span class="p">((</span><span class="n">CIImage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span><span class="p">)</span><span class="err">?</span>
    
    <span class="n">override</span> <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">setupCaptureSession</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">private</span> <span class="n">func</span> <span class="n">setupCaptureSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Create</span> <span class="n">capture</span> <span class="n">session</span>
        <span class="n">captureSession</span> <span class="o">=</span> <span class="n">AVCaptureSession</span><span class="p">()</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">sessionPreset</span> <span class="o">=</span> <span class="o">.</span><span class="n">high</span>
        
        <span class="o">//</span> <span class="n">Get</span> <span class="n">default</span> <span class="n">video</span> <span class="n">device</span> <span class="p">(</span><span class="n">webcam</span><span class="p">)</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">videoDevice</span> <span class="o">=</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No video device available&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="n">do</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Create</span> <span class="nb">input</span> <span class="kn">from</span> <span class="nn">video</span> <span class="n">device</span>
            <span class="n">let</span> <span class="n">videoInput</span> <span class="o">=</span> <span class="k">try</span> <span class="n">AVCaptureDeviceInput</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">videoDevice</span><span class="p">)</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="nb">input</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span> <span class="o">==</span> <span class="n">true</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="n">videoInput</span><span class="p">)</span>
            <span class="p">}</span>
            
            <span class="o">//</span> <span class="n">Create</span> <span class="ow">and</span> <span class="n">configure</span> <span class="n">video</span> <span class="n">output</span>
            <span class="n">videoOutput</span> <span class="o">=</span> <span class="n">AVCaptureVideoDataOutput</span><span class="p">()</span>
            <span class="n">videoOutput</span><span class="err">?</span><span class="o">.</span><span class="n">setSampleBufferDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">:</span> <span class="n">DispatchQueue</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="s2">&quot;videoQueue&quot;</span><span class="p">))</span>
            
            <span class="o">//</span> <span class="n">Add</span> <span class="n">output</span> <span class="n">to</span> <span class="n">session</span>
            <span class="k">if</span> <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">canAddOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span> <span class="o">==</span> <span class="n">true</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">addOutput</span><span class="p">(</span><span class="n">videoOutput</span><span class="err">!</span><span class="p">)</span>
            <span class="p">}</span>
            
        <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error setting up video capture: \(error)&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">startCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">DispatchQueue</span><span class="o">.</span><span class="k">global</span><span class="p">(</span><span class="n">qos</span><span class="p">:</span> <span class="o">.</span><span class="n">userInitiated</span><span class="p">)</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="ow">in</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">startRunning</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Stop</span> <span class="n">capturing</span>
    <span class="n">func</span> <span class="n">stopCapture</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">captureSession</span><span class="err">?</span><span class="o">.</span><span class="n">stopRunning</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Create</span> <span class="n">preview</span> <span class="n">layer</span> <span class="k">for</span> <span class="n">displaying</span> <span class="n">video</span>
    <span class="n">func</span> <span class="n">createPreviewLayer</span><span class="p">(</span><span class="ow">in</span> <span class="n">view</span><span class="p">:</span> <span class="n">NSView</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">captureSession</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">AVCaptureVideoPreviewLayer</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">session</span><span class="p">)</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="o">.</span><span class="n">resizeAspectFill</span>
        <span class="n">previewLayer</span><span class="err">?</span><span class="o">.</span><span class="n">autoresizingMask</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="n">layerWidthSizable</span><span class="p">,</span> <span class="o">.</span><span class="n">layerHeightSizable</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">let</span> <span class="n">previewLayer</span> <span class="o">=</span> <span class="n">previewLayer</span> <span class="p">{</span>
            <span class="n">view</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">previewLayer</span>
            <span class="n">view</span><span class="o">.</span><span class="n">wantsLayer</span> <span class="o">=</span> <span class="n">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="o">//</span> <span class="n">Delegate</span> <span class="n">method</span> <span class="n">to</span> <span class="n">receive</span> <span class="n">frames</span>
    <span class="n">func</span> <span class="n">captureOutput</span><span class="p">(</span><span class="n">_</span> <span class="n">output</span><span class="p">:</span> <span class="n">AVCaptureOutput</span><span class="p">,</span> <span class="n">didOutput</span> <span class="n">sampleBuffer</span><span class="p">:</span> <span class="n">CMSampleBuffer</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">connection</span><span class="p">:</span> <span class="n">AVCaptureConnection</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">guard</span> <span class="n">let</span> <span class="n">imageBuffer</span> <span class="o">=</span> <span class="n">CMSampleBufferGetImageBuffer</span><span class="p">(</span><span class="n">sampleBuffer</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        
        <span class="n">let</span> <span class="n">ciImage</span> <span class="o">=</span> <span class="n">CIImage</span><span class="p">(</span><span class="n">cvPixelBuffer</span><span class="p">:</span> <span class="n">imageBuffer</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Pass</span> <span class="n">the</span> <span class="n">frame</span> <span class="n">to</span> <span class="n">handler</span> <span class="k">if</span> <span class="n">one</span> <span class="ow">is</span> <span class="nb">set</span>
        <span class="n">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="ow">in</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">frameHandler</span><span class="err">?</span><span class="p">(</span><span class="n">ciImage</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this in your application:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><span class="k">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">NSViewController</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">var</span> <span class="n">webcamManager</span><span class="p">:</span> <span class="n">WebcamManager</span><span class="err">!</span>
    
    <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Initialize</span> <span class="n">webcam</span> <span class="n">manager</span>
        <span class="n">webcamManager</span> <span class="o">=</span> <span class="n">WebcamManager</span><span class="p">()</span>
        
        <span class="o">//</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">preview</span> <span class="ow">in</span> <span class="n">view</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">createPreviewLayer</span><span class="p">(</span><span class="ow">in</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span>
        
        <span class="o">//</span> <span class="n">Optional</span><span class="p">:</span> <span class="n">Handle</span> <span class="n">received</span> <span class="n">frames</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">frameHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="n">weak</span> <span class="bp">self</span><span class="p">]</span> <span class="n">image</span> <span class="ow">in</span>
            <span class="o">//</span> <span class="n">Do</span> <span class="n">something</span> <span class="k">with</span> <span class="n">the</span> <span class="n">CIImage</span>
            <span class="bp">self</span><span class="err">?</span><span class="o">.</span><span class="n">processFrame</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="o">//</span> <span class="n">Start</span> <span class="n">capturing</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">startCapture</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="n">func</span> <span class="n">processFrame</span><span class="p">(</span><span class="n">_</span> <span class="n">image</span><span class="p">:</span> <span class="n">CIImage</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Process</span> <span class="n">the</span> <span class="n">frame</span> <span class="n">here</span>
        <span class="o">//</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">you</span> <span class="n">could</span><span class="p">:</span>
        <span class="o">//</span> <span class="o">-</span> <span class="n">Apply</span> <span class="n">filters</span>
        <span class="o">//</span> <span class="o">-</span> <span class="n">Perform</span> <span class="n">image</span> <span class="n">analysis</span>
        <span class="o">//</span> <span class="o">-</span> <span class="n">Save</span> <span class="n">frames</span>
        <span class="o">//</span> <span class="o">-</span> <span class="n">etc</span><span class="o">.</span>
    <span class="p">}</span>
    
    <span class="n">deinit</span> <span class="p">{</span>
        <span class="n">webcamManager</span><span class="o">.</span><span class="n">stopCapture</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


To use this in your application, you'll need to:

1. Add the required privacy permissions to your Info.plist:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">NSCameraUsageDescription</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">This</span> <span class="n">app</span> <span class="n">needs</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span> <span class="n">camera</span> <span class="n">to</span> <span class="n">capture</span> <span class="n">video</span><span class="o">.&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</pre></div></td></tr></table></div>


2. Make sure your application has the necessary capabilities:
- Go to your target settings
- Select "Signing & Capabilities"
- Click "+" and add "Camera Usage Description"

Key features of this implementation:

1. Uses AVFoundation framework for camera access
2. Creates a capture session to manage video input and output
3. Provides a preview layer for displaying the video feed
4. Allows frame-by-frame processing through the frameHandler closure
5. Runs capture on a background queue to prevent UI blocking
6. Properly handles setup and teardown of capture session

Additional considerations:

1. Error handling: You might want to add more robust error handling
2. Camera selection: This uses the default video device, but you could add support for selecting specific cameras
3. Configuration: You might want to add support for different capture presets or camera settings
4. Memory management: Ensure proper cleanup of resources when the capture session is no longer needed

To access specific camera settings or multiple cameras:

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><span class="o">//</span> <span class="n">List</span> <span class="n">available</span> <span class="n">cameras</span>
<span class="n">let</span> <span class="n">discoverySession</span> <span class="o">=</span> <span class="n">AVCaptureDevice</span><span class="o">.</span><span class="n">DiscoverySession</span><span class="p">(</span>
    <span class="n">deviceTypes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">],</span>
    <span class="n">mediaType</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="o">.</span><span class="n">unspecified</span>
<span class="p">)</span>
<span class="n">let</span> <span class="n">devices</span> <span class="o">=</span> <span class="n">discoverySession</span><span class="o">.</span><span class="n">devices</span>

<span class="o">//</span> <span class="n">Configure</span> <span class="n">camera</span> <span class="n">settings</span>
<span class="k">if</span> <span class="n">let</span> <span class="n">device</span> <span class="o">=</span> <span class="n">videoDevice</span> <span class="p">{</span>
    <span class="k">try</span><span class="err">?</span> <span class="n">device</span><span class="o">.</span><span class="n">lockForConfiguration</span><span class="p">()</span>
    <span class="n">device</span><span class="o">.</span><span class="n">focusMode</span> <span class="o">=</span> <span class="o">.</span><span class="n">continuousAutoFocus</span>
    <span class="n">device</span><span class="o">.</span><span class="n">unlockForConfiguration</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


This provides a foundation for working with webcam video in macOS. You can extend it based on your specific needs, such as adding support for recording, image capture, or real-time video processing.</p>
<h1>Check if any of the following conditions are true:</h1>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureSession</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVCaptureDevice</code>: True</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>ffmpeg</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>QuickTime</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>AVFoundation</code>: True</p>
<h2>Final Answer: True</h2>
</div>
    